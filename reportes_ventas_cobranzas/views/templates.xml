<odoo>
    <data>
        <template id="reportes_ventas_cobranzas.reporte_cobranzas">
            <t t-call="web.html_container">
                <t t-call="web.internal_layout">
                    <style>
                        b {
                        font-size: 13px;
                        }
                        p {
                        font-size: 13px;
                        }
                        .borde {
                        border: 1px solid black;
                        }
                        .borde-total tr td {
                        border: 1px solid black;
                        }
                        .col-2 {
                        padding:0px;
                        }
                        .col-1 {
                        padding:0px;
                        }
                        .col-3 {
                        padding:0px;
                        }
                        .col-4 {
                        padding:0px;
                        }
                        .row {
                        min-height:26px;
                        }
                        .table tbody td{
                        font-weight: normal !important;
                        font-size: 10px;
                        }
                        .table thead th{
                        font-weight: normal !important;
                        font-size: 10px;
                        }
                    </style>

                    <t t-if="pagos_gs and len(pagos_gs) > 1">

                        <div style="text-align:center">
                            <b>REPORTE DE COBRANZAS</b>
                            <br/>
                            <b>CORRESPONDIENTE A
                                <t t-esc="fecha"/>
                                -
                                <t t-esc="fecha_fin"/>
                            </b>
                        </div>
                        <br></br>
                        <div style="page-break-inside:avoid">
                            <div class="row">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>CLIENTE</th>
                                            <th>CONDICION</th>
                                            <th>FECHA</th>
                                            <th>NRO FACTURA</th>
                                            <th>IMPORTE PYG</th>
                                            <th>FECHA RECIBO</th>
                                            <th>COMPROBANTE</th>
                                            <th>CHEQUE</th>
                                            <th>TRANSFERENCIA</th>
                                            <th>EFECTIVO</th>
                                            <th>RETENCIÓN</th>
                                            <th>TOTAL COBRADO</th>


                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-set="total_cheque_gs" t-value="0"/>
                                        <t t-set="total_efectivo_gs" t-value="0"/>
                                        <t t-set="total_transferencia_gs" t-value="0"/>
                                        <t t-set="total_tc_gs" t-value="0"/>
                                        <t t-set="total_td_gs" t-value="0"/>
                                        <t t-set="total_retenciones_gs" t-value="0"/>
                                        <t t-set="total_general_gs" t-value="0"/>
                                        <t t-foreach="pagos_gs" t-as="pago">
                                            <t t-foreach="pago.move_id._get_reconciled_invoices_partials()[0]" t-as="rec">
                                                <t t-if="rec and len(rec) > 1 and rec[1] != 0.0">
                                                    <t t-set="amount" t-value="rec[1]"/>
                                                    <t t-set="inv" t-value="rec[2].move_id"/>
                                                    <t t-if="inv.move_type != 'entry' and inv.currency_id.name == 'PYG'">

                                                        <t t-if="pago.tipo_pago == 'TCredito'">
                                                            <t t-set="total_tc_gs" t-value="total_tc_gs + amount"/>
                                                        </t>

                                                        <t t-if="pago.tipo_pago == 'TDebito'">
                                                            <t t-set="total_td_gs" t-value="total_td_gs + amount"/>
                                                        </t>

                                                        <t t-if="pago.tipo_pago == 'Retencion'">
                                                            <t t-set="total_retenciones_gs"
                                                               t-value="total_retenciones_gs + amount"/>
                                                        </t>
                                                        <t t-set="total_monto_trans" t-value="0"/>
                                                        <t t-set="total_monto_cheque" t-value="0"/>
                                                        <t t-set="total_monto_efectivo" t-value="0"/>
                                                        <t t-set="total_general_gs" t-value="total_general_gs + amount"/>
                                                            <t t-foreach="pago.move_id.line_ids" t-as="retencion">
                                                            <t t-if="retencion.account_id.name == 'Retención IVA'">
                                                                <!-- Asegúrate de que 'retencion.debit' no es None -->
                                                                <t t-set="retencion1" t-value="retencion.debit or 0"/>

                                                                <!-- Asegúrate de que 'amount' no es None -->
                                                                <t t-set="amount" t-value="amount or 0"/>
                                                                <t t-set="cal_div" t-value="(amount / 11)"/>

                                                                <!-- Asegúrate de que 'cal_div' es un número válido antes de la conversión a int -->
                                                                <t t-set="calculo_retencion" t-value="(int(cal_div) * float(0.3) if cal_div else 0)"/>

                                                                <!-- Asegúrate de que 'total_retenciones_gs' no es None -->
                                                                <t t-set="total_retenciones_gs" t-value="total_retenciones_gs or 0"/>

                                                                <!-- Asegúrate de que 'calculo_retencion' no es None -->
                                                                <t t-set="calculo_retencion" t-value="calculo_retencion or 0"/>
                                                                <t t-set="total_retenciones_gs" t-value="total_retenciones_gs + calculo_retencion"/>

                                                                <!-- Asegúrate de que 'calculo_retencion' no es None -->
                                                                <t t-set="total_monto" t-value="amount - calculo_retencion"/>

                                                                <t t-if="pago.tipo_pago == 'Cheque'">
                                                                    <t t-set="total_monto_cheque" t-value="total_monto"/>
                                                                </t>
                                                                <t t-if="pago.tipo_pago == 'Transferencia'">
                                                                    <t t-set="total_monto_trans" t-value="total_monto"/>
                                                                </t>
                                                                <t t-if="pago.tipo_pago == 'Efectivo'">
                                                                    <t t-set="total_monto_efectivo" t-value="total_monto"/>
                                                                </t>
                                                            </t>
                                                        </t>
                                                        <t t-if="pago.tipo_pago == 'Cheque'">
                                                            <t t-if="total_monto_cheque">
                                                                <t t-set="total_cheque_gs" t-value="total_cheque_gs + total_monto_cheque"/>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="total_cheque_gs" t-value="total_cheque_gs + amount"/>
                                                            </t>
                                                        </t>
                                                        <t t-if="pago.tipo_pago == 'Transferencia'">
                                                            <t t-if="total_monto_trans">
                                                                <t t-set="total_transferencia_gs" t-value="total_transferencia_gs + total_monto_trans"/>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="total_transferencia_gs"
                                                                   t-value="total_transferencia_gs + amount"/>
                                                            </t>
                                                        </t>
                                                        <t t-if="pago.tipo_pago == 'Efectivo'">
                                                            <t t-if="total_monto_efectivo">
                                                                <t t-set="total_efectivo_gs" t-value="total_efectivo_gs + total_monto_efectivo"/>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="total_efectivo_gs"
                                                                   t-value="total_efectivo_gs + amount"/>
                                                            </t>
                                                        </t>
                                                        <tr>
                                                            <td>
                                                                <t t-esc="inv.partner_id.name"/>
                                                            </td>
                                                            <td>
                                                                <t t-if="inv.invoice_date &lt; inv.invoice_date_due">
                                                                    Crédito
                                                                </t>
                                                                <t t-else="">
                                                                    Contado
                                                                </t>
                                                            </td>
                                                            <td>
                                                                <t t-esc="inv.invoice_date"/>
                                                            </td>
                                                            <td>
                                                                <t t-esc="inv.name"/>
                                                            </td>
                                                            <td>
                                                                <t t-esc="inv.currency_id.name"/>
                                                                <t t-if="inv.currency_id.name == 'PYG'">
                                                                    <t
                                                                            t-esc="'{0:,.0f}'.format(int(inv.amount_total)).replace(',','.')"/>
                                                                </t>
                                                                <t t-else="">
                                                                    <t
                                                                            t-esc="'{0:,.2f}'.format(inv.amount_total).replace(',','.')"/>
                                                                </t>
                                                            </td>
                                                            <td>
                                                                <t t-esc="pago.date"/>
                                                            </td>
                                                            <td>
                                                                <t t-esc="pago.nro_recibo"/>
                                                            </td>
                                                            <td>
                                                                <t t-esc="inv.currency_id.name"/>

                                                                <t t-if="pago.tipo_pago == 'Cheque'">
                                                                    <t t-if="total_monto_cheque">
                                                                        <t t-esc="'{0:,.0f}'.format(int(total_monto_cheque)).replace(',','.')"/>
                                                                    </t>
                                                                    <t t-else="">
                                                                        <t t-esc="'{0:,.0f}'.format(int(amount)).replace(',','.')"/>
                                                                    </t>


                                                                </t>
                                                                <t t-else="">
                                                                    0
                                                                </t>

                                                            </td>
                                                            <td>
                                                                <t t-esc="inv.currency_id.name"/>
                                                                <t t-if="pago.tipo_pago == 'Transferencia'">
                                                                    <t t-if="total_monto_trans">
                                                                        <t t-esc="'{0:,.0f}'.format(int(total_monto_trans)).replace(',','.')"/>
                                                                    </t>
                                                                    <t t-else="">
                                                                        <t t-esc="'{0:,.0f}'.format(int(amount)).replace(',','.')"/>

                                                                    </t>

                                                                </t>
                                                                <t t-else="">
                                                                    0
                                                                </t>
                                                            </td>
                                                            <td>
                                                                <t t-esc="inv.currency_id.name"/>
                                                                <t t-if="pago.tipo_pago == 'Efectivo'">
                                                                    <t t-if="total_monto_efectivo">
                                                                        <t t-esc="'{0:,.0f}'.format(int(total_monto_efectivo)).replace(',','.')"/>
                                                                    </t>
                                                                    <t t-else="">
                                                                        <t t-esc="'{0:,.0f}'.format(int(amount)).replace(',','.')"/>

                                                                    </t>

                                                                </t>
                                                                <t t-else="">
                                                                    0
                                                                </t>
                                                            </td>

                                                            <td>
                                                                <t t-set="valor_mostrar" t-value="0"/>

                                                                <t t-esc="inv.currency_id.name"/>

                                                                <t t-if="pago.tipo_pago == 'Retencion'">
                                                                    <t t-if="amount">
                                                                        <t t-set="valor_mostrar" t-esc="'{0:,.0f}'.format(int(amount)).replace(',','.')"/>

                                                                    </t>

                                                                </t>
                                                                <!--
                                                                <t t-foreach="pago.move_id.line_ids" t-as="retencion">
                                                                    <t t-if="retencion.account_id.name == 'Retención IVA'">

                                                                        <t t-set="valor_mostrar"
                                                                           t-esc="'{0:,.0f}'.format(int(calculo_retencion)).replace(',','.')"/>
                                                                        <t t-set="valor_retencion" t-value="calculo_retencion"/>
                                                                    </t>

                                                                </t>
                                                                -->
                                                                <t t-esc="valor_mostrar"/>


                                                            </td>

                                                            <td>
                                                                <t t-esc="inv.currency_id.name"/>


                                                                <t t-esc="'{0:,.0f}'.format(int(amount)).replace(',','.')"/>


                                                            </td>


                                                        </tr>
                                                    </t>
                                                </t>
                                             </t>

                                        </t>
                                    </tbody>
                                    <tbody>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td>

                                            </td>
                                            <td>TOTALES</td>
                                            <td>
                                                PYG
                                                <t t-esc="'{0:,.0f}'.format(int(total_cheque_gs)).replace(',','.')"/>

                                            </td>
                                            <td>
                                                PYG
                                                <t
                                                        t-esc="'{0:,.0f}'.format(int(total_transferencia_gs)).replace(',','.')"/>
                                            </td>
                                            <td>
                                                PYG
                                                <t t-esc="'{0:,.0f}'.format(int(total_efectivo_gs)).replace(',','.')"/>
                                            </td>

                                            <td>
                                                PYG
                                                <t t-esc="'{0:,.0f}'.format(int(total_retenciones_gs)).replace(',','.')"/>
                                            </td>
                                            <td>
                                                PYG
                                                <t t-esc="'{0:,.0f}'.format(int(total_general_gs)).replace(',','.')"/>
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>


                        <div style="page-break-inside: avoid">
                            <div class="row">
                                <p></p>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Cheque:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>PYG
                                        <t
                                                t-esc="'{0:,.0f}'.format(int(total_cheque_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Efectivo:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>PYG
                                        <t
                                                t-esc="'{0:,.0f}'.format(int(total_efectivo_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Transferencias:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>PYG
                                        <t
                                                t-esc="'{0:,.0f}'.format(int(total_transferencia_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Tarjeta de Crédito:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>PYG
                                        <t
                                                t-esc="'{0:,.0f}'.format(int(total_tc_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Tarjeta de Débito:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>PYG
                                        <t
                                                t-esc="'{0:,.0f}'.format(int(total_td_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Retenciones:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>PYG
                                        <t
                                                t-esc="'{0:,.0f}'.format(int(total_retenciones_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <p></p>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total General:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>PYG
                                        <t t-esc="'{0:,.0f}'.format(int(total_general_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </t>
                    <p style="page-break-after:always;"/>
                    <t t-if="pagos_us and len(pagos_us) > 1">
                        <div style="text-align:center">
                            <b>REPORTE DE COBRANZAS</b>
                            <br/>
                            <b>CORRESPONDIENTE A
                                <t t-esc="fecha"/>
                                -
                                <t t-esc="fecha_fin"/>
                            </b>
                        </div>
                        <br></br>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>CLIENTE</th>
                                    <th>CONDICION</th>
                                    <th>FECHA</th>
                                    <th>NRO FACTURA</th>
                                    <th>IMPORTE PYG</th>
                                    <th>FECHA RECIBO</th>
                                    <th>COMPROBANTE</th>
                                    <th>CHEQUE</th>
                                    <th>TRANSFERENCIA</th>
                                    <th>EFECTIVO</th>
                                    <th>RETENCIÓN</th>
                                    <th>DIFERENCIA DE CAMBIO</th>
                                    <th>TOTAL COBRADO</th>


                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="total_cheque_us" t-value="0"/>
                                <t t-set="total_efectivo_us" t-value="0"/>
                                <t t-set="total_transferencia_us" t-value="0"/>
                                <t t-set="total_tc_us" t-value="0"/>
                                <t t-set="total_td_us" t-value="0"/>
                                <t t-set="total_retenciones_us" t-value="0"/>
                                <t t-set="total_general_us" t-value="0"/>
                                <t t-set="total_diferencia_us" t-value="0"/>
                                <t t-foreach="pagos_us" t-as="pagos">
                                    <t t-foreach="pagos.move_id._get_reconciled_invoices_partials()[0]" t-as="rec"> <!-- Accede a la primera parte de la tupla -->
                                        <t t-if="rec and len(rec) > 1 and rec[1] != 0.0"> <!-- Verifica que rec tenga más de un elemento -->
                                            <t t-set="amount" t-value="rec[1]"/> <!-- Accede al segundo elemento de cada tupla interna -->
                                            <t t-set="inv" t-value="rec[2].move_id"/>
                                            <t t-if="inv.move_type != 'entry'">
                                                <t t-if="pagos.tipo_pago == 'TCredito'">
                                                    <t t-set="total_tc_us" t-value="total_tc_us + amount"/>
                                                </t>

                                                <t t-if="pagos.tipo_pago == 'TDebito'">
                                                    <t t-set="total_td_us" t-value="total_td_us + amount"/>
                                                </t>

                                                <t t-if="pagos.tipo_pago == 'Retencion'">
                                                    <t t-set="total_retenciones_us"
                                                        t-value="total_retenciones_us + amount"/>
                                                </t>

                                                <t t-set="total_general_us" t-value="total_general_us + amount"/>
                                            </t>
                                            <t t-foreach="pagos.move_id.line_ids" t-as="diferencia">
                                                <t t-if="diferencia.account_id.name == 'Retención IVA'">
                                                    <!-- Asegúrate de que 'amount' no es None -->
                                                    <t t-set="amount" t-value="amount or 0"/>
                                                    <t t-set="cal_div" t-value="(amount / 11)"/>
                                                    <!-- Asegúrate de que 'cal_div' es un número válido antes de la conversión a int -->
                                                    <t t-set="calculo_diferencia" t-value="(int(cal_div) * float(0.3) if cal_div else 0)"/>
                                                    <!-- Asegúrate de que 'total_diferencia_us' no es None -->
                                                    <t t-set="total_diferencia_us" t-value="total_diferencia_us or 0"/>
                                                    <!-- Asegúrate de que 'calculo_retencion' no es None -->
                                                    <t t-set="calculo_retencion" t-value="calculo_retencion or 0"/>
                                                    <!-- Asegúrate de que 'calculo_diferencia' no es None -->
                                                    <t t-set="calculo_diferencia" t-value="calculo_diferencia or 0"/>
                                                    <t t-set="total_diferencia_us" t-value="total_diferencia_us + calculo_diferencia"/>
                                                    <t t-set="total_monto_us" t-value="amount - calculo_diferencia"/>
                                                    <t t-if="pagos.tipo_pago == 'Cheque'">
                                                        <t t-set="total_monto_cheque_us" t-value="total_monto_us"/>
                                                    </t>
                                                    <t t-if="pagos.tipo_pago == 'Transferencia'">
                                                        <t t-set="total_monto_trans_us" t-value="total_monto_us"/>
                                                    </t>
                                                    <t t-if="pagos.tipo_pago == 'Efectivo'">
                                                        <t t-set="total_monto_efectivo_us" t-value="total_monto_us"/>
                                                    </t>
                                                </t>
                                            </t>
                                                 <t t-if="pagos.tipo_pago == 'Cheque'">
                                                    <t t-if="total_monto_cheque_us">
                                                        <t t-set="total_cheque_gs" t-value="total_cheque_gs + total_monto_cheque_us"/>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="total_cheque_us" t-value="total_cheque_us + amount"/>
                                                    </t>
                                                </t>
                                                <t t-if="pagos.tipo_pago == 'Transferencia'">
                                                    <t t-if="total_monto_trans_us">
                                                        <t t-set="total_transferencia_us" t-value="total_transferencia_us + total_monto_trans_us"/>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="total_transferencia_us"
                                                           t-value="total_transferencia_us + amount"/>
                                                    </t>
                                                </t>
                                                <t t-if="pagos.tipo_pago == 'Efectivo'">
                                                    <t t-if="total_monto_efectivo_us">
                                                        <t t-set="total_efectivo_us" t-value="total_efectivo_us + total_monto_efectivo_us"/>
                                                    </t>
                                                    <t t-else="">
                                                        <t t-set="total_efectivo_us"
                                                           t-value="total_efectivo_us + amount"/>
                                                    </t>

                                                </t>
                                                <tr>
                                                    <td>
                                                        <t t-esc="inv.partner_id.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-if="inv.invoice_date and inv.invoice_date_due and inv.invoice_date &lt; inv.invoice_date_due">
                                                            Crédito
                                                        </t>
                                                        <t t-else="">
                                                            Contado
                                                        </t>
                                                    </td>

                                                    <td>
                                                        <t t-esc="inv.invoice_date"/>
                                                    </td>

                                                    <td>
                                                        <t t-esc="inv.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="inv.currency_id.name"/>
                                                        <t t-if="inv.currency_id.name == 'PYG'">
                                                            <t
                                                                    t-esc="'{0:,.0f}'.format(int(inv.amount_total)).replace(',','.')"/>
                                                        </t>
                                                        <t t-else="">
                                                            <t
                                                                    t-esc="'{0:,.2f}'.format(inv.amount_total).replace(',','.')"/>
                                                        </t>
                                                    </td>
                                                    <td>
                                                        <t t-esc="pagos.date"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="pagos.nro_recibo"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="inv.currency_id.name"/>

                                                        <t t-if="pagos.tipo_pago == 'Cheque'">
                                                            <t t-if="total_monto_cheque_us">
                                                                <t t-esc="'{0:,.0f}'.format(int(total_monto_cheque_us)).replace(',','.')"/>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-esc="'{0:,.0f}'.format(int(amount)).replace(',','.')"/>
                                                            </t>

                                                        </t>
                                                        <t t-else="">
                                                            0
                                                        </t>

                                                    </td>
                                                    <td>
                                                        <t t-esc="inv.currency_id.name"/>
                                                        <t t-if="pagos.tipo_pago == 'Transferencia'">
                                                            <t t-if="total_monto_trans_us">
                                                                <t t-esc="'{0:,.0f}'.format(int(total_monto_trans_us)).replace(',','.')"/>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-esc="'{0:,.0f}'.format(int(amount)).replace(',','.')"/>

                                                            </t>

                                                        </t>
                                                        <t t-else="">
                                                            0
                                                        </t>
                                                    </td>
                                                    <td>
                                                        <t t-esc="inv.currency_id.name"/>
                                                        <t t-if="pagos.tipo_pago == 'Efectivo'">
                                                            <t t-if="total_monto_efectivo_us">
                                                                <t t-esc="'{0:,.0f}'.format(int(total_monto_efectivo_us)).replace(',','.')"/>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-esc="'{0:,.0f}'.format(int(amount)).replace(',','.')"/>

                                                            </t>

                                                        </t>
                                                        <t t-else="">
                                                            0
                                                        </t>
                                                    </td>

                                                    <td>
                                                        <t t-esc="inv.currency_id.name"/>

                                                        <t t-if="pagos.tipo_pago == 'Retencion'">
                                                            <t t-if="amount">
                                                                <t t-esc="'{0:,.0f}'.format(int(amount)).replace(',','.')"/>
                                                            </t>

                                                        </t>
                                                        <t t-else="">
                                                            0
                                                        </t>
                                                    </td>
                                                    <td>
                                                        <t t-set="valor_mostrar" t-value="0"/>

                                                        <t t-foreach="pagos.move_id.line_ids" t-as="diferencia">
                                                            <t t-if="diferencia.account_id.name == 'Retención IVA'">
                                                                <t t-if="calculo_diferencia is not None">
                                                                    <t t-set="valor_mostrar" t-esc="'{0:,.0f}'.format(int(calculo_diferencia)).replace(',','.')"/>
                                                                </t>
                                                                <t t-else="">
                                                                    <t t-set="valor_mostrar" t-esc="'0'"/>
                                                                </t>

                                                            </t>


                                                        </t>
                                                    </td>

                                                    <td>
                                                        <t t-esc="inv.currency_id.name"/>
                                                        <t t-esc="'{0:,.0f}'.format(int(amount)).replace(',','.')"/>

                                                    </td>


                                                </tr>

                                        </t>
                                    </t>
                                </t>

                            </tbody>
                            <tbody>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>TOTALES</td>
                                    <td>
                                        USD
                                        <t t-esc="'{0:,.0f}'.format(int(total_cheque_us)).replace(',','.')"/>

                                    </td>
                                    <td>
                                        USD
                                        <t
                                                t-esc="'{0:,.0f}'.format(int(total_transferencia_us)).replace(',','.')"/>
                                    </td>
                                    <td>
                                        USD
                                        <t t-esc="'{0:,.0f}'.format(int(total_efectivo_us)).replace(',','.')"/>
                                    </td>

                                    <td>
                                        USD
                                        <t t-esc="'{0:,.0f}'.format(int(total_retenciones_us)).replace(',','.')"/>
                                    </td>
                                    <td>
                                        USD
                                        <t t-esc="'{0:,.0f}'.format(int(total_diferencia_us)).replace(',','.')"/>
                                    </td>
                                    <td>
                                        USD
                                        <t t-esc="'{0:,.0f}'.format(int(total_general_us)).replace(',','.')"/>
                                    </td>



                                </tr>
                            </tbody>

                        </table>


                        <div style="page-break-inside: avoid">
                            <div class="row">
                                <p></p>
                            </div>


                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Cheque:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t
                                                t-esc="'{0:,.2f}'.format(total_cheque_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Efectivo:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t
                                                t-esc="'{0:,.2f}'.format(total_efectivo_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Transferencias:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t
                                                t-esc="'{0:,.2f}'.format(total_transferencia_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Tarjeta de Crédito:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t t-esc="'{0:,.2f}'.format(total_tc_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Tarjeta de Débito:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t t-esc="'{0:,.2f}'.format(total_td_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Retenciones:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t
                                                t-esc="'{0:,.2f}'.format(total_retenciones_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total Diferencia de Cambio:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t
                                                t-esc="'{0:,.2f}'.format(total_diferencia_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <p></p>
                            </div>
                            <div class="row">
                                <div class="col-8">
                                </div>
                                <div class="col-2">
                                    <p>
                                        Total General:
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t
                                                t-esc="'{0:,.2f}'.format(total_general_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>

                        </div>
                    </t>


                    <p style="page-break-after:always;"/>

                    <div style="text-align:center">
                        <b>REPORTE DE COBRANZAS</b>
                        <br/>
                        <b>CORRESPONDIENTE A
                            <t t-esc="fecha"/>
                            -
                            <t t-esc="fecha_fin"/>
                        </b>
                    </div>
                    <t t-if="pagos.filtered(lambda x:x.tipo_pago == 'Cheque')">
                        <div style="page-break-inside: avoid">
                            <div class="col-6" style="text-align:center">
                                <b>CHEQUES</b>
                            </div>
                            <div style="page-break-inside:avoid">
                                <div class="row">
                                    <div class="col-3">
                                        <b>CLIENTE</b>
                                    </div>
                                    <div class="col-2">
                                        <b>COMPROBANTE</b>
                                    </div>
                                    <div class="col-2">
                                        <b>BANCO</b>
                                    </div>
                                    <div class="col-2">
                                        <b>NRO DE CHEQUE</b>
                                    </div>
                                    <div class="col-2">
                                        <b>MONTO</b>
                                    </div>
                                </div>
                            </div>
                            <t t-set="total_gs" t-value="0"/>
                            <t t-set="total_us" t-value="0"/>
                            <t t-foreach="pagos.filtered(lambda x:x.tipo_pago == 'Cheque')" t-as="pago">
                                <div class="row">
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.partner_id.name"/>
                                        </p>
                                    </div>
                                    <div class="col-2">
                                        <p>
                                            <t t-esc="pago.nro_recibo"/>
                                        </p>
                                    </div>
                                    <div class="col-2">
                                        <p>
                                            <t t-esc="pago.bank_id.name"/>
                                        </p>
                                    </div>
                                    <div class="col-2">
                                        <p>
                                            <t t-esc="pago.nro_cheque"/>
                                        </p>
                                    </div>
                                    <div class="col-2">
                                        <p>
                                            <t t-esc="pago.currency_id.name"/>
                                            <!-- <t t-esc="pago.amount" /> -->
                                            <t t-if="pago.currency_id.name == 'PYG'">
                                                <t t-set="total_gs" t-value="total_gs + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.0f}'.format(int(pago.amount)).replace(',','.')"/>
                                            </t>
                                            <t t-else="pago.currency_id.name == 'USD'">
                                                <t t-set="total_us" t-value="total_us + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.2f}'.format(pago.amount).replace(',','.')"/>
                                            </t>
                                        </p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-2">
                                        <p>TOTAL GUARANIES:</p>
                                    </div>
                                    <div class="col-3">
                                        <p>PYG
                                            <t t-esc="'{0:,.0f}'.format(int(total_gs)).replace(',','.')"/>
                                        </p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-2">
                                        <p>TOTAL DOLARES:</p>
                                    </div>
                                    <div class="col-2">
                                        <p>USD
                                            <t t-esc="'{0:,.2f}'.format(total_us).replace(',','.')"/>
                                        </p>
                                    </div>
                                </div>
                            </t>
                            <div class="row">
                                <p></p>
                            </div>
                        </div>
                    </t>
                    <t t-if="pagos.filtered(lambda x:x.tipo_pago == 'Transferencia')">
                        <div style="page-break-inside: avoid">
                            <div class="col-6" style="text-align:center">
                                <b>TRANSFERENCIAS</b>
                            </div>
                            <div style="page-break-inside:avoid">
                                <div class="row">
                                    <div class="col-3">
                                        <b>CLIENTE</b>
                                    </div>
                                    <div class="col-3">
                                        <b>COMPROBANTE</b>
                                    </div>
                                    <div class="col-3">
                                        <b>MONTO</b>
                                    </div>
                                </div>
                            </div>
                            <t t-set="total_gs" t-value="0"/>
                            <t t-set="total_us" t-value="0"/>
                            <t t-foreach="pagos.filtered(lambda x:x.tipo_pago == 'Transferencia')"
                               t-as="pago">
                                <div class="row">
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.partner_id.name"/>
                                        </p>
                                    </div>
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.nro_recibo"/>
                                        </p>
                                    </div>
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.currency_id.name"/>
                                            <t t-if="pago.currency_id.name == 'PYG'">
                                                <t t-set="total_gs" t-value="total_gs + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.0f}'.format(int(pago.amount)).replace(',','.')"/>
                                            </t>
                                            <t t-else="pago.currency_id.name == 'USD'">
                                                <t t-set="total_us" t-value="total_us + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.2f}'.format(pago.amount).replace(',','.')"/>
                                            </t>
                                        </p>
                                    </div>
                                </div>
                            </t>
                            <div class="row">
                                <div class="col-2">
                                    <p>TOTAL GUARANIES:</p>
                                </div>
                                <div class="col-3">
                                    <p>PYG
                                        <t t-esc="'{0:,.0f}'.format(int(total_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-2">
                                    <p>TOTAL DOLARES:</p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t t-esc="'{0:,.2f}'.format(total_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <p></p>
                            </div>
                        </div>
                    </t>
                    <t t-if="pagos.filtered(lambda x:x.tipo_pago == 'Efectivo')">
                        <div style="page-break-inside: avoid">
                            <div class="col-6" style="text-align:center">
                                <b>EFECTIVO</b>
                            </div>
                            <div style="page-break-inside:avoid">
                                <div class="row">
                                    <div class="col-3">
                                        <b>CLIENTE</b>
                                    </div>
                                    <div class="col-3">
                                        <b>COMPROBANTE</b>
                                    </div>
                                    <div class="col-3">
                                        <b>MONTO</b>
                                    </div>
                                </div>
                            </div>
                            <t t-set="total_gs" t-value="0"/>
                            <t t-set="total_us" t-value="0"/>
                            <t t-foreach="pagos.filtered(lambda x:x.tipo_pago == 'Efectivo')"
                               t-as="pago">
                                <div class="row">
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.partner_id.name"/>
                                        </p>
                                    </div>
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.nro_recibo"/>
                                        </p>
                                    </div>
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.currency_id.name"/>
                                            <!-- <t t-esc="pago.amount" /> -->
                                            <t t-if="pago.currency_id.name == 'PYG'">
                                                <t t-set="total_gs" t-value="total_gs + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.0f}'.format(int(pago.amount)).replace(',','.')"/>
                                            </t>
                                            <t t-else="pago.currency_id.name == 'USD'">
                                                <t t-set="total_us" t-value="total_us + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.2f}'.format(pago.amount).replace(',','.')"/>
                                            </t>
                                        </p>
                                    </div>
                                </div>
                            </t>
                            <div class="row">
                                <div class="col-2">
                                    <p>TOTAL GUARANIES:</p>
                                </div>
                                <div class="col-3">
                                    <p>PYG
                                        <t t-esc="'{0:,.0f}'.format(int(total_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-2">
                                    <p>TOTAL DOLARES:</p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t t-esc="'{0:,.2f}'.format(total_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <p></p>
                            </div>
                        </div>
                    </t>
                    <t t-if="pagos.filtered(lambda x:x.tipo_pago == 'TDebito')">
                        <div style="page-break-inside: avoid">
                            <div class="col-6" style="text-align:center">
                                <b>TARJETA DE DEBITO</b>
                            </div>
                            <div style="page-break-inside:avoid">
                                <div class="row">
                                    <div class="col-3">
                                        <b>CLIENTE</b>
                                    </div>
                                    <div class="col-3">
                                        <b>COMPROBANTE</b>
                                    </div>
                                    <div class="col-3">
                                        <b>MONTO</b>
                                    </div>
                                </div>
                            </div>
                            <t t-set="total_gs" t-value="0"/>
                            <t t-set="total_us" t-value="0"/>
                            <t t-foreach="pagos.filtered(lambda x:x.tipo_pago == 'TDebito')"
                               t-as="pago">
                                <div class="row">
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.partner_id.name"/>
                                        </p>
                                    </div>
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.nro_recibo"/>
                                        </p>
                                    </div>
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.currency_id.name"/>
                                            <!-- <t t-esc="pago.amount" /> -->
                                            <t t-if="pago.currency_id.name == 'PYG'">
                                                <t t-set="total_gs" t-value="total_gs + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.0f}'.format(int(pago.amount)).replace(',','.')"/>
                                            </t>
                                            <t t-else="pago.currency_id.name == 'USD'">
                                                <t t-set="total_us" t-value="total_us + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.2f}'.format(pago.amount).replace(',','.')"/>
                                            </t>
                                        </p>
                                    </div>
                                </div>
                            </t>
                            <div class="row">
                                <div class="col-2">
                                    <p>TOTAL GUARANIES:</p>
                                </div>
                                <div class="col-3">
                                    <p>PYG
                                        <t t-esc="'{0:,.0f}'.format(int(total_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-2">
                                    <p>TOTAL DOLARES:</p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t t-esc="'{0:,.2f}'.format(total_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <p></p>
                            </div>
                        </div>
                    </t>

                    <t t-if="pagos.filtered(lambda x:x.tipo_pago == 'TCredito')">

                        <div style="page-break-inside: avoid">
                            <div class="col-6" style="text-align:center">
                                <b>TARJETA DE CREDITO</b>
                            </div>
                            <div style="page-break-inside:avoid">
                                <div class="row">
                                    <div class="col-3">
                                        <b>CLIENTE</b>
                                    </div>
                                    <div class="col-3">
                                        <b>COMPROBANTE</b>
                                    </div>
                                    <div class="col-3">
                                        <b>MONTO</b>
                                    </div>
                                </div>
                            </div>
                            <t t-set="total_gs" t-value="0"/>
                            <t t-set="total_us" t-value="0"/>
                            <t t-foreach="pagos.filtered(lambda x:x.tipo_pago == 'TCredito')"
                               t-as="pago">
                                <div class="row">
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.partner_id.name"/>
                                        </p>
                                    </div>
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.nro_recibo"/>
                                        </p>
                                    </div>
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.currency_id.name"/>
                                            <!-- <t t-esc="pago.amount" /> -->
                                            <t t-if="pago.currency_id.name == 'PYG'">
                                                <t t-set="total_gs" t-value="total_gs + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.0f}'.format(int(pago.amount)).replace(',','.')"/>
                                            </t>
                                            <t t-else="pago.currency_id.name == 'USD'">
                                                <t t-set="total_us" t-value="total_us + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.2f}'.format(pago.amount).replace(',','.')"/>
                                            </t>
                                        </p>
                                    </div>
                                </div>
                            </t>
                            <div class="row">
                                <div class="col-2">
                                    <p>TOTAL GUARANIES:</p>
                                </div>
                                <div class="col-3">
                                    <p>PYG
                                        <t t-esc="'{0:,.0f}'.format(int(total_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-2">
                                    <p>TOTAL DOLARES:</p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t t-esc="'{0:,.2f}'.format(total_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <p></p>
                            </div>
                        </div>
                    </t>
                    <t t-if="pagos.filtered(lambda x:x.tipo_pago == 'Retencion')">


                        <div style="page-break-inside: avoid">
                            <div class="col-6" style="text-align:center">
                                <b>RETENCIONES</b>
                            </div>
                            <div style="page-break-inside:avoid">
                                <div class="row">
                                    <div class="col-3">
                                        <b>CLIENTE</b>
                                    </div>
                                    <div class="col-3">
                                        <b>COMPROBANTE</b>
                                    </div>
                                    <div class="col-3">
                                        <b>MONTO</b>
                                    </div>
                                    <!-- <div class="col-3">
                                        <b>RETENCIÓN</b>
                                    </div> -->
                                </div>
                            </div>
                            <t t-set="total_gs" t-value="0"/>
                            <t t-set="total_us" t-value="0"/>

                            <t t-foreach="pagos.filtered(lambda x:x.tipo_pago == 'Retencion')"
                               t-as="pago">
                                <div class="row">
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.partner_id.name"/>
                                        </p>
                                    </div>
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.nro_recibo"/>
                                        </p>
                                    </div>
                                    <div class="col-3">
                                        <p>
                                            <t t-esc="pago.currency_id.name"/>
                                            <!-- <t t-esc="pago.amount" /> -->
                                            <t t-if="pago.currency_id.name == 'PYG'">
                                                <t t-set="total_gs" t-value="total_gs + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.0f}'.format(int(pago.amount)).replace(',','.')"/>
                                            </t>
                                            <t t-else="pago.currency_id.name == 'USD'">
                                                <t t-set="total_us" t-value="total_us + pago.amount"/>
                                                <t
                                                        t-esc="'{0:,.2f}'.format(pago.amount).replace(',','.')"/>
                                            </t>
                                        </p>
                                    </div>
                                    <!-- <div class="col-3">
                                        <p>
                                            <t t-foreach="pago.move_id.line_ids" t-as="linea">
                                                <t t-if="linea.account_id.id == 2469">
                                                    <t t-esc="pago.currency_id.name" />
                                                    <t
                                                    t-esc="'{0:,.0f}'.format(int(linea.debit)).replace(',','.')" />
                                                </t>

                                            </t>
                                        </p>
                                    </div> -->
                                </div>
                            </t>
                            <div class="row">
                                <div class="col-2">
                                    <p>TOTAL GUARANIES:</p>
                                </div>
                                <div class="col-3">
                                    <p>PYG
                                        <t t-esc="'{0:,.0f}'.format(int(total_gs)).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-2">
                                    <p>TOTAL DOLARES:</p>
                                </div>
                                <div class="col-2">
                                    <p>USD
                                        <t t-esc="'{0:,.2f}'.format(total_us).replace(',','.')"/>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>
        <template id="reportes_ventas_cobranzas.ventas_acumuladas">
            <t t-call="web.html_container">
                <t t-call="web.internal_layout">
                    <style>
                        b {
                        font-size: 14px;
                        }
                        p {
                        font-size: 14px;
                        }
                        .borde {
                        border: 1px solid black;
                        }
                        .borde-total tr td {
                        border: 1px solid black;
                        }
                        .col-1 {
                        padding:0px;
                        }
                        .col-2 {
                        padding:0px;
                        }
                        .col-3 {
                        padding:0px;
                        }
                        .col-4 {
                        padding:0px;
                        }
                        .row {
                        min-height:28px;
                        }
                    </style>
                    <div style="text-align:center">
                        <b>LISTADO DE VENTAS DIARIO.</b>
                        <br/>
                        <b>CORRESPONDIENTE AS
                            <t t-esc="fecha"/>
                        </b>
                    </div>
                    <div style="page-break-inside:avoid">
                        <div class="row">
                            <div class="col-2">
                                <b>NUMERO</b>
                            </div>
                            <div class="col-1">
                                <b>FECHA</b>
                            </div>
                            <div class="col-3">
                                <b>RAZON SOCIAL</b>
                            </div>
                            <div class="col-1">
                                <b>RUC</b>
                            </div>
                            <div class="col-1">
                                <b>GRAV10%</b>
                            </div>
                            <div class="col-1">
                                <b>IVA10%</b>
                            </div>
                            <div class="col-1">
                                <b>GRAV5%</b>
                            </div>
                            <div class="col-1">
                                <b>IVA5%</b>
                            </div>
                            <div class="col-1">
                                <b>EXENTAS</b>
                            </div>
                        </div>
                        <t t-set="tbase10" t-value="0"/>
                        <t t-set="tiva10" t-value="0"/>

                        <t t-set="tbase5" t-value="0"/>
                        <t t-set="tiva5" t-value="0"/>

                        <t t-set="texentas" t-value="0"/>
                        <t t-foreach="facturas" t-as="factura">
                            <div class="row">
                                <div class="col-2">
                                    <p>
                                        <t t-esc="factura['numero']"/>
                                    </p>
                                </div>
                                <div class="col-1">
                                    <p>
                                        <t t-esc="factura['fecha']"/>
                                    </p>
                                </div>
                                <div class="col-3">
                                    <p>
                                        <t t-esc="factura['razon_social']"/>
                                    </p>
                                </div>
                                <div class="col-1">
                                    <p>
                                        <t t-esc="factura['ruc']"/>
                                    </p>
                                </div>
                                <div class="col-1">
                                    <p>
                                        <t t-esc="'{:,}'.format(factura['base10'])"/>
                                    </p>
                                </div>
                                <div class="col-1">
                                    <p>
                                        <t t-esc="'{:,}'.format(factura['iva10'])"/>
                                    </p>
                                </div>
                                <div class="col-1">
                                    <p>
                                        <t t-esc="'{:,}'.format(factura['base5'])"/>
                                    </p>
                                </div>
                                <div class="col-1">
                                    <p>
                                        <t t-esc="'{:,}'.format(factura['iva5'])"/>
                                    </p>
                                </div>
                                <div class="col-1">
                                    <p>
                                        <t t-esc="'{:,}'.format(factura['exentas'])"/>
                                    </p>
                                </div>
                            </div>
                        </t>
                        <div class="row">
                            <div class="col-3">
                                <b>TOTAL DE LA FECHA:
                                    <t t-esc="fecha"/>
                                </b>
                            </div>
                            <div class="col-2">
                                <p>
                                    <t t-esc="'{:,}'.format(total_facturas)"/>
                                </p>
                            </div>
                            <div class="col-2"></div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(total_base10)"/>
                                </p>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(total_iva10)"/>
                                </p>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(total_base5)"/>
                                </p>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(total_iva5)"/>
                                </p>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(total_exentas)"/>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3" style="page-break-inside:avoid;">
                        <div class="row">
                            <div class="col-3">
                                <b>TOTAL ACUMULADO AL
                                    <t t-esc="fecha"/>
                                </b>
                            </div>
                            <div class="col-2">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_total)"/>
                                </p>
                            </div>
                            <div class="col-2"></div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_base10)"/>
                                </p>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_iva10)"/>
                                </p>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_base5)"/>
                                </p>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_iva5)"/>
                                </p>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_exentas)"/>
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <b>
                                    TOTAL VENTAS GRAVADAS DEL MES 10%:
                                </b>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_base10)"/>
                                </p>
                            </div>
                            <div class="col-1">
                                <b>
                                    IVA 10%:
                                </b>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_iva10)"/>
                                </p>
                            </div>
                            <div class="col-6"></div>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <b>
                                    TOTAL VENTAS GRAVADAS DEL MES 5%:
                                </b>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_base5)"/>
                                </p>
                            </div>
                            <div class="col-1">
                                <b>
                                    IVA 5%:
                                </b>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_iva5)"/>
                                </p>
                            </div>
                            <div class="col-6"></div>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <b>
                                    TOTAL VENTAS EXENTAS DEL MES:
                                </b>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_exentas)"/>
                                </p>
                            </div>
                            <div class="col-8"></div>
                        </div>
                    </div>
                    <div class="mt-3" style="page-break-inside:avoid;">
                        <div class="row">
                            <div class="col-3">
                                <b>
                                    TOTAL DE VENTAS NETO:
                                </b>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t
                                            t-esc="'{:,}'.format(acumulado_exentas + acumulado_base5 + acumulado_base10)"/>
                                </p>
                            </div>
                            <div class="col-9"></div>

                        </div>
                        <div class="row">
                            <div class="col-3">
                                <b>
                                    TOTAL IVA:
                                </b>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t t-esc="'{:,}'.format(acumulado_iva5 + acumulado_iva10)"/>
                                </p>
                            </div>
                            <div class="col-9"></div>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <b>
                                    TOTAL GENERAL:
                                </b>
                            </div>
                            <div class="col-1">
                                <p>
                                    <t
                                            t-esc="'{:,}'.format(acumulado_iva5 + acumulado_iva10 + acumulado_exentas + acumulado_base5 + acumulado_base10)"/>
                                </p>
                            </div>
                            <div class="col-9"></div>
                        </div>
                    </div>
                </t>
            </t>
        </template>
        <template id="reportes_ventas_cobranzas.ventas_credito">
            <t t-call="web.html_container">
                <t t-call="web.internal_layout">
                    <style>
                        p {
                        font-size: 12px;
                        }
                        b {
                        font-size: 12px;
                        }
                        .borde {
                        border: 1px solid black;
                        }
                        .borde-total tr td {
                        border: 1px solid black;
                        }
                        .col-2 {
                        padding:0px;
                        }
                        .col-1 {
                        padding:0px;
                        }
                        .col-3 {
                        padding:0px;
                        }
                        .col-4 {
                        padding:0px;
                        }
                        .col-2 {
                        padding:0px;
                        }
                        .col-1 {
                        padding:0px;
                        }
                        .col-3 {
                        padding:0px;
                        }
                        .col-4 {
                        padding:0px;
                        }
                        .row {
                        min-height:24px;
                        }
                    </style>
                    <div style="text-align:center">
                        <b>LISTADO DE VENTAS A CREDITO</b>
                        <br/>
                        <b>CORRESPONDIENTE AL PERIODO
                            <t t-esc="fecha"/>
                            -
                            <t t-esc="fecha"/>
                        </b>
                    </div>
                    <div class="row">
                        <div class="col-4">
                            <b>NOMBREL DEL CLIENTES</b>
                        </div>
                        <div class="col-2">
                            <b>TIPO DE PAGO</b>
                        </div>
                        <div class="col-2">
                            <b>FECHA DE FACTURA</b>
                        </div>
                        <div class="col-2">
                            <b>NUMERO DE FACTURA</b>
                        </div>
                        <div class="col-2">
                            <b>MONTO DE FACTURA</b>
                        </div>
                    </div>
                    <t t-set="total_usd" t-value="0"/>
                    <t t-set="total_pyg" t-value="0"/>
                    <t t-set="total_equivalente" t-value="0"/>

                    <t t-foreach="facturas" t-as="factura">
                        <t t-if="factura.currency_id.name == 'USD'">
                            <t t-set="total_usd" t-value="total_usd + factura.amount_total"/>
                            <t t-set="total_equivalente"
                               t-value="total_equivalente + round(factura.currency_id._convert(factura.amount_total, company.currency_id, company, fecha, round=True),0)"/>
                        </t>
                        <t t-if="factura.currency_id.name == 'PYG'">
                            <t t-set="total_pyg" t-value="total_pyg + factura.amount_total"/>
                        </t>
                        <div class="row">
                            <div class="col-4">
                                <p>
                                    <t t-esc="factura.partner_id.name"/>
                                </p>
                            </div>
                            <div class="col-2">
                                <p>
                                    <t t-esc="factura.invoice_payment_term_id.name"/>
                                </p>
                            </div>
                            <div class="col-2">
                                <p>
                                    <t t-esc="factura.invoice_date"/>
                                </p>
                            </div>
                            <div class="col-2">
                                <p>
                                    <t t-esc="factura.name"/>
                                </p>
                            </div>
                            <div class="col-2">
                                <p>
                                    <t t-esc="factura.currency_id.name"/>
                                    <!-- <t t-esc="factura.amount_total" /> -->
                                    <t t-if="factura.currency_id.name == 'PYG'">
                                        <span
                                                t-esc="'{0:,.0f}'.format(int(factura.amount_total)).replace(',','.')"/>
                                    </t>
                                    <t t-else="">
                                        <span
                                                t-esc="'{0:,.2f}'.format(factura.amount_total).replace(',','.')"/>
                                    </t>
                                </p>
                            </div>
                        </div>
                    </t>
                    <br/>
                    <div class="row">
                        <div class="col-7"></div>
                        <div class="col-3">
                            <p>TOTAL GS:</p>
                        </div>
                        <div class="col-2">
                            <p>
                                <!-- <t t-esc="total_pyg" /> -->
                                <span t-esc="'{0:,.0f}'.format(int(total_pyg)).replace(',','.')"/>
                            </p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-7"></div>
                        <div class="col-3">
                            <p>TOTAL US:</p>
                        </div>
                        <div class="col-2">
                            <p>
                                <!-- <t t-esc="total_usd" /> -->
                                <span t-esc="'{0:,.2f}'.format(total_usd).replace(',','.')"/>
                            </p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-3"></div>
                        <div class="col-2">
                            <p>TIPO DE CAMBIO:</p>
                        </div>
                        <div class="col-2">
                            <p>
                                <!-- <t t-esc="rate_usd" /> -->
                                <span t-esc="'{0:,.0f}'.format(int(rate_usd)).replace(',','.')"/>
                            </p>
                        </div>
                        <div class="col-3">
                            <p>EQUIVALENTE DE LA VENTA EN USD:</p>
                        </div>
                        <div class="col-2">
                            <p>
                                <!-- <t t-esc="total_equivalente" /> -->
                                <span
                                        t-esc="'{0:,.0f}'.format(int(total_equivalente)).replace(',','.')"/>
                            </p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-7"></div>
                        <div class="col-3">
                            <p>GRAN TOTAL:</p>
                        </div>
                        <div class="col-2">
                            <p>
                                <!-- <t t-esc="total_equivalente + total_pyg" /> -->
                                <span
                                        t-esc="'{0:,.0f}'.format(int(total_equivalente + total_pyg)).replace(',','.')"/>
                            </p>
                        </div>
                    </div>
                </t>
            </t>
        </template>
        <template id="reportes_ventas_cobranzas.ventas_contado">
            <t t-call="web.html_container">
                <t t-call="web.internal_layout">
                    <style>
                        p {
                        font-size: 12px;
                        }
                        b {
                        font-size: 12px;
                        }
                        .borde {
                        border: 1px solid black;
                        }
                        .borde-total tr td {
                        border: 1px solid black;
                        }
                        .col-2 {
                        padding:0px;
                        }
                        .col-1 {
                        padding:0px;
                        }
                        .col-3 {
                        padding:0px;
                        }
                        .col-4 {
                        padding:0px;
                        }
                        .row {
                        min-height:24px;
                        }
                    </style>

                    <div class="page">
                        <div style="text-align:center">
                            <b>LISTADO DE VENTAS AL CONTADO</b>
                            <br/>
                            <b>CORRESPONDIENTE AL PERIODO
                                <t t-esc="fecha"/>
                                -
                                <t t-esc="fecha"/>
                            </b>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <b>NOMBRE DEL CLIENTE</b>
                            </div>
                            <div class="col-1">
                                <b>TIPO</b>
                            </div>
                            <div class="col-2">
                                <b>FECHA DE PAGO</b>
                            </div>
                            <div class="col-2">
                                <b>NUMERO DE FACTURA</b>
                            </div>
                            <div class="col-1">
                                <b>MONTO</b>
                            </div>
                            <div class="col-2">
                                <b>NUMERO DE PAGO</b>
                            </div>
                            <div class="col-1">
                                <b>METODO</b>
                            </div>
                        </div>
                        <t t-set="total_usd" t-value="0"/>
                        <t t-set="total_pyg" t-value="0"/>
                        <t t-set="total_equivalente" t-value="0"/>

                        <t t-set="total_contado" t-value="0"/>
                        <t t-set="total_credito" t-value="0"/>

                        <t t-set="total_efectivo" t-value="0"/>
                        <t t-set="total_cheque" t-value="0"/>

                        <t t-foreach="facturas" t-as="factura">
                            <t t-if="factura[0].currency_id.name == 'USD'">
                                <t t-set="total_usd" t-value="total_usd + factura[0].amount_total"/>
                                <t t-set="total_equivalente"
                                   t-value="total_equivalente + round(factura[0].currency_id._convert(factura[0].amount_total, company.currency_id, company, fecha, round=True),0)"/>
                                <t t-set="total_contado"
                                   t-value="total_contado + round(factura[0].currency_id._convert(factura[0].amount_total, company.currency_id, company, fecha, round=True),0)"/>
                                <t t-if="not factura[1] == 'x'">
                                    <t t-if="factura[1].tipo_pago == 'Efectivo'">
                                        <t t-set="total_efectivo"
                                           t-value="total_efectivo + round(factura[0].currency_id._convert(factura[0].amount_total, company.currency_id, company, fecha, round=True),0)"/>
                                    </t>
                                    <t t-if="factura[1].tipo_pago == 'Cheque'">
                                        <t t-set="total_cheque"
                                           t-value="total_cheque + round(factura[0].currency_id._convert(factura[0].amount_total, company.currency_id, company, fecha, round=True),0)"/>
                                    </t>
                                </t>
                            </t>
                            <t t-if="factura[0].currency_id.name == 'PYG'">
                                <t t-set="total_pyg" t-value="total_pyg + factura[0].amount_total"/>
                                <t t-set="total_contado"
                                   t-value="total_contado + factura[0].amount_total"/>
                                <t t-if="not factura[1] == 'x'">
                                    <t t-if="factura[1].tipo_pago == 'Efectivo'">
                                        <t t-set="total_efectivo"
                                           t-value="total_efectivo + factura[0].amount_total"/>
                                    </t>
                                    <t t-if="factura[1].tipo_pago == 'Cheque'">
                                        <t t-set="total_cheque"
                                           t-value="total_cheque + factura[0].amount_total"/>
                                    </t>
                                </t>
                            </t>
                            <div class="row">
                                <div class="col-3">
                                    <p>
                                        <t t-esc="factura[0].partner_id.name"/>
                                    </p>
                                </div>
                                <div class="col-1">
                                    <p>Contado</p>
                                </div>
                                <div class="col-2">
                                    <p>
                                        <t t-esc="factura[0].invoice_date"/>
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>
                                        <t t-esc="factura[0].name"/>
                                    </p>
                                </div>
                                <div class="col-1">
                                    <p>
                                        <t t-esc="factura[0].currency_id.name"/>
                                        <t t-if="factura[0].currency_id.name == 'PYG'">
                                            <span
                                                    t-esc="'{0:,.0f}'.format(int(factura[0].amount_total)).replace(',','.')"/>
                                        </t>
                                        <t t-else="">
                                            <span
                                                    t-esc="'{0:,.2f}'.format(factura[0].amount_total).replace(',','.')"/>
                                        </t>
                                    </p>
                                </div>
                                <div class="col-2">
                                    <p>
                                        <t t-if="not factura[1] == 'x'">
                                            <t t-esc="factura[1].name"/>
                                        </t>
                                        <t t-else="">
                                            <span/>
                                        </t>
                                    </p>
                                </div>
                                <div class="col-1">
                                    <p>
                                        <t t-if="not factura[1] == 'x'">
                                            <t t-esc="factura[1].tipo_pago"/>
                                        </t>
                                        <t t-else="">
                                            <span/>
                                        </t>
                                    </p>
                                </div>
                            </div>
                        </t>
                        <br/>
                        <!-- <table class="table-sm borde" style="width:100%"> -->
                        <div class="row">
                            <div class="col-7"/>
                            <div class="col-3">
                                <b>TOTAL GS:</b>
                            </div>
                            <div class="col-2">
                                <p>

                                    <span t-esc="'{0:,.0f}'.format(int(total_pyg)).replace(',','.')"/>
                                    <!-- <t t-esc="total_pyg" /> -->
                                </p>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-7"/>
                            <div class="col-3">
                                <b>TOTAL US:</b>
                            </div>
                            <div class="col-2">
                                <p>
                                    <span t-esc="'{0:,.2f}'.format(total_usd).replace(',','.')"/>
                                    <!-- <t t-esc="total_usd" /> -->
                                </p>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-7"/>
                            <div class="col-3">
                                <b>EQUIVALENTE DE LA VENTA EN USD:</b>
                            </div>
                            <div class="col-2">
                                <p>
                                    <!-- <t t-esc="total_equivalente" /> -->
                                    <span
                                            t-esc="'{0:,.0f}'.format(int(total_equivalente)).replace(',','.')"/>
                                </p>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-7"/>
                            <div class="col-3">
                                <b>GRAN TOTAL:</b>
                            </div>
                            <div class="col-2">
                                <p>
                                    <!-- <t t-esc="total_equivalente + total_pyg" /> -->
                                    <span
                                            t-esc="'{0:,.0f}'.format(int(total_equivalente + total_pyg)).replace(',','.')"/>
                                </p>
                            </div>
                        </div>

                        <br/>

                        <div class="row">
                            <div class="col-3"/>
                            <div class="col-2">
                                <b>TOTAL CONTADO:</b>
                            </div>
                            <div class="col-2">
                                <p>
                                    <!-- <t t-esc="total_contado" /> -->
                                    <span
                                            t-esc="'{0:,.0f}'.format(int(total_contado)).replace(',','.')"/>
                                </p>
                            </div>
                            <div class="col-3">
                                <b>TOTAL EFECTIVO:</b>
                            </div>
                            <div class="col-2">
                                <p>
                                    <!-- <t t-esc="total_efectivo" /> -->
                                    <span
                                            t-esc="'{0:,.0f}'.format(int(total_efectivo)).replace(',','.')"/>
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3"/>
                            <div class="col-2">
                                <b>TOTAL NOTA DE CREDITO:</b>
                            </div>
                            <div class="col-2">
                                <p>
                                    <!-- <t t-esc="total_credito" /> -->
                                    <span
                                            t-esc="'{0:,.0f}'.format(int(total_credito)).replace(',','.')"/>
                                </p>
                            </div>
                            <div class="col-3">
                                <b>TOTAL CHEQUE:</b>
                            </div>
                            <div class="col-2">
                                <p>
                                    <!-- <t t-esc="total_cheque" /> -->
                                    <span
                                            t-esc="'{0:,.0f}'.format(int(total_cheque)).replace(',','.')"/>
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </template>
        <record id="reportes_ventas_cobranzas.ventas_cobranzas" model="report.paperformat">
            <field name="name">Ventas Cobranzas</field>
            <field name="default" eval="True"/>
            <field name="format">custom</field>
            <field name="page_height">297</field>
            <field name="page_width">210</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">5</field>
            <field name="margin_bottom">5</field>
            <field name="margin_left">5</field>
            <field name="margin_right">5</field>
            <field name="header_line" eval="False"/>
            <field name="header_spacing">30</field>
            <field name="dpi">90</field>
        </record>
        <record id="reportes_ventas_cobranzas.ventas_cobranzas_land" model="report.paperformat">
            <field name="name">Ventas Cobranzas Land</field>
            <field name="default" eval="True"/>
            <field name="format">custom</field>
            <field name="page_height">297</field>
            <field name="page_width">210</field>
            <field name="orientation">Landscape</field>
            <field name="margin_top">5</field>
            <field name="margin_bottom">5</field>
            <field name="margin_left">5</field>
            <field name="margin_right">5</field>
            <field name="header_line" eval="False"/>
            <field name="header_spacing">30</field>
            <field name="dpi">90</field>
        </record>
        <report id="reportes_ventas_cobranzas.ventas_contado_action"
                string="Reporte de Ventas al Contado" model="reportes_ventas_cobranzas.reporte"
                report_type="qweb-pdf" name="reportes_ventas_cobranzas.ventas_contado"
                file="Ventas Contado" paperformat="reportes_ventas_cobranzas.ventas_cobranzas"/>

        <report id="reportes_ventas_cobranzas.ventas_credito_action"
                string="Reporte de Ventas a Credito" model="reportes_ventas_cobranzas.reporte"
                report_type="qweb-pdf" name="reportes_ventas_cobranzas.ventas_credito"
                file="Ventas Credito" paperformat="reportes_ventas_cobranzas.ventas_cobranzas"/>

        <report id="reportes_ventas_cobranzas.ventas_acumuladas_action"
                string="Reporte de Ventas7 a Acumuladas" model="reportes_ventas_cobranzas.reporte"
                report_type="qweb-pdf" name="reportes_ventas_cobranzas.ventas_acumuladas"
                file="Ventas Acumuladas" paperformat="reportes_ventas_cobranzas.ventas_cobranzas_land"/>

        <report id="reportes_ventas_cobranzas.reporte_cobranzas_action"
                string="Reporte de Cobranzas" model="reportes_ventas_cobranzas.reporte"
                report_type="qweb-pdf" name="reportes_ventas_cobranzas.reporte_cobranzas"
                file="Ventas Acumuladas" paperformat="reportes_ventas_cobranzas.ventas_cobranzas_land"/>

        <record id="reportes_ventas_cobranzas.reporte_cobranzas_xlsx_action" model="ir.actions.report">
            <field name="name">Reporte de Ventas y Cobranzas XLSX</field>
            <field name="model">reportes_ventas_cobranzas.reporte</field>
            <field name="report_type">xlsx</field>
            <field name="report_name">reportes_v_c.reporte_c_xlsx_action_t</field>
            <field name="report_file">reportes_v_c.reporte_c_xlsx_action_t</field>
        </record>
    </data>
</odoo>