<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>
        <record id="account_payment_form_view" model="ir.ui.view">
            <field name="name">account_payment_form_view</field>
            <field name="model">account.payment</field>
            <field name="inherit_id" ref="account.view_account_payment_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='payment_type']" position="before">
                    <field name="nro_recibo" string="Nro. Recibo / OP" attrs="{'readonly':[('state','!=','draft')]}"/>
                </xpath>

                <xpath expr="//field[@name='date']" position="after">
                    <field name="tipo_pago"
                           attrs="{'readonly':[('state','!=','draft')]}"/>
                    <field name="nro_cheque"
                           attrs="{'readonly':[('state','!=','draft')],'required':[('tipo_pago','=','Cheque')],'invisible':[('tipo_pago','!=','Cheque')]}"/>
                    <field name="bank_id"
                           attrs="{'readonly':[('state','!=','draft')],'required':[('tipo_pago','in',['Cheque','Transferencia'])],'invisible':[('tipo_pago','not in',['Cheque','Transferencia'])]}"/>
                    <field name="fecha_cheque"
                           attrs="{'readonly':[('state','!=','draft')],'required':[('tipo_pago','in',['Cheque'])],'invisible':[('tipo_pago','not in',['Cheque'])]}"/>
                    <field name="fecha_vencimiento_cheque"
                           attrs="{'readonly':[('state','!=','draft')],'required':[('tipo_pago','in',['Cheque'])],'invisible':[('tipo_pago','not in',['Cheque'])]}"/>
                    <field name="nro_cuenta"
                           attrs="{'readonly':[('state','!=','draft')],'required':[('tipo_pago','in',['Cheque'])],'invisible':[('tipo_pago','not in',['Cheque'])]}"/>
                    <field name="nro_documento"
                           attrs="{'readonly':[('state','!=','draft')],'required':[('tipo_pago','in',['TCredito','Transferencia','Retencion','TDebito','Otros'])],'invisible':[('tipo_pago','not in',['TCredito','Transferencia','Retencion','TDebito','Otros'])]}"/>
                    <field name="observaciones" attrs="{'readonly':[('state','!=','draft')]}"/>
                </xpath>

            </field>
        </record>

        <!-- model.name inherit tree view -->

        <record id="view_account_payment_tree" model="ir.ui.view">
            <field name="name">view_account_payment_tree</field>
            <field name="model">account.payment</field>
            <field name="inherit_id" ref="account.view_account_payment_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="nro_recibo"/>
                    <field name="tipo_pago"/>
                    <field name="nro_cheque"/>
                    <field name="bank_id"/>
                    <field name="fecha_cheque"/>
                    <field name="fecha_vencimiento_cheque"/>
                    <field name="nro_documento"/>
                </xpath>
                <!--xpath expr="//field[@name='payment_method_id']" position="replace">
                </xpath-->
            </field>
        </record>

        <record id="account.action_account_payments" model="ir.actions.act_window">
            <field name="name">Pagos</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">account.payment</field>
            <field name="view_mode">tree,form,pivot,graph</field>
            <field name="context"><![CDATA[{
            'default_payment_type': 'inbound',
            'default_partner_type': 'customer',
            'search_default_inbound_filter': 1,
            'res_partner_search_mode': 'customer',
            }]]></field>
        </record>

    </data>
</odoo>
