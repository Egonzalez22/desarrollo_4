<odoo>
    <data>

        <template id="orden_pago.orden_pago">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">

                    <style>
                        * {
                            font-size: 10px;
                            font-family: Arial, Helvetica, sans-serif;
                            font-weight: normal;
                            padding: 5px 2px;
                        }

                        #contenedor {
                            width: 90%;
                            margin: 0 auto;
                        }

                        .linea {}

                        .line-label {
                            width: 140px;
                            display: inline-block;
                            font-weight: bold;
                        }

                        #titulo {
                            text-align: center;
                            font-size: 18px;
                            color: black;
                            font-weight: bold;
                            margin: 4mm
                        }

                        .clearfix {
                            clear: both;
                        }

                        .left {
                            float: left;
                            min-height: 10px;
                        }

                        .detalle-titulos {
                            padding: 0 7px;
                            border-bottom: 1px solid #666;
                            border-top: 1px solid #666;
                        }

                        .strong {
                            font-weight: bold;
                        }

                        .border {
                            border: 1px solid #666;
                        }
                        .border-l{
                            border-left: 1px solid #666;
                        }
                        .border-r{
                            border-right: 1px solid #666;
                        }
                        .p2{
                            padding: 3px;
                        }
                        .p3{
                            padding: 3px;
                        }
                        .py-2{
                            padding-top: 2px;
                            padding-bottom: 2px;
                        }
                        .f-13{
                            font-size: 13px !important;
                        }
                    </style>

                    <div id="titulo">ÓRDENES DE PAGO</div>
                    <!-- <strong>Referencia: </strong> <span t-esc="referencia"></span> -->

                    <!-- Titulos -->
                    <div class="detalle-titulos">
                        <div class="left strong py-2 f-13" style="width:5%">OP</div>
                        <div class="left strong py-2 f-13" style="width:30%">Proveedor</div>
                        <div class="left strong py-2 f-13" style="width:13%">Importe <br />Calculado</div>
                        <div class="left strong py-2 f-13" style="width:13%">Importe <br /> Aprobado</div>
                        <div class="left strong py-2 f-13" style="width:13%">Moneda</div>
                        <div class="left strong py-2 f-13" style="width:13%">Fecha <br />Aprobación</div>
                        <div class="left strong py-2 f-13" style="width:13%">Aprobado por</div>
                        <div class="clearfix"></div>
                    </div>

                    <!-- Creamos una variable para tener el total -->
                    <t t-set="total_calculado" t-value="0" />
                    <t t-set="total_pagado" t-value="0" />
                    <!-- Iteramos por cada orden de pago -->
                    <t t-foreach="docs" t-as="orden">
                        <div class="detalle-detalle">
                            <div class="left" style="width:5%"><span t-esc="orden.name"></span></div>
                            <div class="left" style="width:30%"><span t-esc="orden.partner_id.name"></span></div>
                            <div class="left" style="width:13%"><span t-esc="orden.get_amount_format(orden.importe_calculado, orden.currency_id)"></span></div>
                            <div class="left" style="width:13%"><span t-esc="orden.get_amount_format(orden.importe_pagado, orden.currency_id)"></span></div>
                            <div class="left" style="width:13%"><span t-esc="orden.currency_id.name"></span></div>
                            <div class="left" style="width:13%"><span t-esc="orden.fecha_aprobado"></span></div>
                            <div class="left" style="width:13%"><span t-esc="orden.aprobado_por.name"></span></div>
                            <div class="clearfix"></div>
                        </div>

                        <!-- sumamos los totales -->
                        <t t-set="total_calculado" t-value="total_calculado + orden.importe_calculado" />
                        <t t-set="total_pagado" t-value="total_pagado + orden.importe_pagado" />

                    </t>

                    <t t-set="orden" t-value="docs[0]" />

                    <!-- mostramos los totales -->
                    <div class="detalle-titulos">
                        <div class="left strong" style="width:5%"></div>
                        <div class="left strong" style="width:30%"></div>
                        <!-- agregamos separador de miles y con 2 decimales -->
                        <div class="left strong" style="width:13%">
                            <span t-esc="orden.get_amount_format(total_calculado, orden.currency_id)" />
                        </div>
                        <div class="left strong" style="width:13%">
                            <span t-esc="orden.get_amount_format(total_pagado, orden.currency_id)" />
                        </div>
                        <div class="left strong" style="width:13%"></div>
                        <div class="left strong" style="width:13%"></div>
                        <div class="left strong" style="width:13%"></div>
                        <div class="clearfix"></div>
                    </div>
                    <br />  
                    <!-- Concepto y forma de pago -->
                    <t t-foreach="docs" t-as="orden">
                        <div style="margin-top:15px">
                            <strong>Tipo de pago: </strong> <span t-field="orden.tipo_pago"></span>
                        </div>
                        <div style="margin-top:15px" t-if="orden.tipo_pago == 'Cheque'">
                            <strong>Nro de Cheque: </strong> _____________________________
                        </div>
                        <div style="margin-top:15px" t-if="orden.tipo_pago == 'Cheque'">
                            <strong>Banco: </strong> ____________________________________
                        </div>
                        <div style="margin-top:15px" t-if="orden.tipo_pago == 'Transferencia'">
                            <strong>Cuenta Bancaria: </strong> ____________________________________
                        </div>
                        <div style="margin-top:15px">
                            <strong>Concepto de pago: </strong> <span t-field="orden.concepto"></span>
                        </div>
                    </t>

                    <!-- cuadro de firmas -->
                    <!-- agregamos una table con dos columnas y dentro de cada columna 3 columnas mas -->
                    <div style="height:200px"></div>
                    <table style="width: 100%; border: none !important">
                        <tr>
                            <td style="width: 100%;text-align:center; ">
                                <div class="border" style="font-weight: bold; padding: 5px 0;">AUTORIZACIÓN DE PAGO</div>
                                <div>
                                    <div style="width:33%;float:left;">
                                        <div class="border-r">Director</div>
                                        <div class="border-r" style="height: 100px;"></div>
                                    </div>

                                    <div style="width:33%;float:left;">
                                        <div class="border-r">Gerente General</div>
                                        <div class="border-r" style="height: 100px;"></div>
                                    </div>

                                    <div style="width:33%;float:left;">
                                        <div>Gerente Adm. y Finanzas</div>
                                        <div style="height: 100%;"></div>
                                    </div>

                                    <div class="clearfix"></div>
                                </div>
                            </td>
                        </tr>
                        <tr style="border: none !important; height: 10px; margin: 0; padding: 0; border: none !important;">
                        </tr>
                        <tr>
                            <td style="width: 100%">
                                <div class="border" style="font-weight: bold; padding: 5px 0;">Recibido Conforme:</div>
                                <div>
                                    <span style="margin-left:4px">Fecha: </span>
                                    
                                </div>

                                <div>
                                    <div style="height: 65px;"></div>
                                    <div style="width:50%;float:left">
                                        <span style="margin-left:4px">Recibido por: ...................................................</span>
                                    </div>
                                    <div style="width:50%;float:left">
                                        <span>Firma: ...................................................</span>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </td>
                        </tr>
                    </table>

                </t>
            </t>
        </template>

        <record id="orden_pago.orden_pago_paper" model="report.paperformat">
            <field name="name">Formato Impresión Orden Pago</field>
            <field name="default" eval="False" />
            <field name="format">custom</field>
            <field name="page_height">320</field>
            <field name="page_width">210</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">15</field>
            <field name="margin_bottom">15</field>
            <field name="margin_left">5</field>
            <field name="margin_right">5</field>
            <field name="header_line" eval="False" />
            <field name="header_spacing">15</field>
            <field name="dpi">96</field>
        </record>

        <record id="orden_pago.orden_pago_action" model="ir.actions.report">
            <field name="name">Orden de Pago</field>
            <field name="model">orden_pago.orden_pago</field>
            <field name="report_type">qweb-pdf</field>
            <field name="paperformat_id" ref="orden_pago.orden_pago_paper" />
            <field name="report_name">orden_pago.orden_pago</field>
            <field name="print_report_name">'Orden de Pago %s' % (object.name or '')</field>
            <field name="binding_model_id" ref="orden_pago.model_orden_pago_orden_pago" />
            <field name="binding_type">report</field>
        </record>

    </data>
</odoo>